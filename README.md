# Amazon TopSeller KPI Scraping

## Amazom APIとは
Amazon JPが提供するAmazon APIについて記述します。  
Amazon APIは、商品の情報を取得することができるAPIで取得する代表的な情報の角度は以下の通りです
```console
1. 特定の単語がどの商品カテゴリ(ブラウズIDなどと呼ばれる)に属するか
2. 商品カテゴリごとのランキング情報Top10
3. 商品のIDごとのアトリビュート（値段や製造メーカや様々な情報）
4. 商品のIDごとのレビュー情報
```
機械学習を用いたマーケティングとして有益な情報の角度としては、ランキング情報が間接的に世の中の市況を表現すると考えれられるので、何かしら使えるという印象があります  

また、商品の口コミ情報も何か使えると思います   

## Amazon APIの制限
使用頻度を見ている限り、１分間に一回以上実行すると、503エラー（頻度が多すぎるエラー）が出るというものなので、制約は結構厳しいです  

## 実際のランキング情報取得フロー
- 1. 欲しいキーワードの一覧を得る
- 2. キーワード一覧から、それが所属する商品カテゴリを検索する
- 3. 商品カテゴリからランキングを取得する
- 4.　必要に応じて、商品の口コミ情報を取得する

## プログラムの実行例
あらかじめ、keysというファイルをcredentials　のディレクトリに入れておく必要があります　　　
keysには、AWSのアクセスキーと、シークレットキーと、ユーザ名を記す必要があります  

### 商品のアトリビュートを表示
```console
$ python3 examples.py '--attribute'
```
サンプル出力結果
```console
<idtype>ASIN</idtype><itemid>4774142298</itemid>
<responsegroup>ItemAttributes</responsegroup>
<asin>4774142298</asin>
<url>https://www.amazon.co.jp/gp/pdp/taf/4774142298</url>
<itemattributes>
  <author>辻 真吾</author>
  <binding>大型本</binding>
  <ean>9784774142296</ean>
  <isbn>4774142298</isbn>
  <label>技術評論社</label>
  <language><name>日本語</name><type>Published</type></language>
  <manufacturer>技術評論社</manufacturer>
  <numberofpages>320</numberofpages>
  <height units="100分の1インチ">87</height>
  <length units="100分の1インチ">898</length>
  <weight units="100分の1ポンド">123</weight>
  <width units="100分の1インチ">724</width>
  <publisher>技術評論社</publisher>
  <studio>技術評論社</studio>
  <title>Pythonスタートブック</title>
</itemattributes>
```

### 類似商品トップ１０を表示
```console
$ python3 examples.py '--similarities'
```
出力結果
```console
<title>入門 Python 3</title>
<title>実践力を身につける Pythonの教科書</title>
<title>みんなのPython 第4版</title>
<title>ゼロから作るDeep Learning ―Pythonで学ぶディープラーニングの理論と実装</title>
<title>たのしいプログラミング Pythonではじめよう!</title>
<title>科学技術計算のためのPython入門 ――開発基礎、必須ライブラリ、高速化</title>
<title>個人投資家のためのFinTechプログラミング (日経BPムック)</title>
<title>12歳からはじめる ゼロからの Pythonゲームプログラミング教室</title>
<title>退屈なことはPythonにやらせよう ―ノンプログラマーにもできる自動化処理プログラミング</title>
<title>ゲームを作りながら楽しく学べるPythonプログラミング (Future Coders(NextPublishing))</title>
```

### キーワードが所属しやすいカテゴリ一覧を検索
```console
$ python3 examples.py '--categories'
```
「任天堂」というキーワードでカテゴリを検索
```
{'ゲーム機本体': '4731379051', 'Nintendo Switch': '4731377051', '機種別': '637872', 'ゲーム': '637394', 'By Formats': '3686221', '一般': '515838', '企業経営': '505358', '実践経営・リーダーシップ': '492052', 'ビジネス・経済': '466282', 'ジャンル別': '465610', '本': '465392', '日本経済新聞出版社': '12865801', 'By Publishers': '465614', '日本経済新聞社出版局': '12869851', 'なか見！検索': '15749671', 'Stores': '515742', 'ゲームソフト': '2228407051', 'ニンテンドー3DS': '2225588051', 'スキンシール': '2225601051', '周辺機器・アクセサリ': '2225591051', 'カテゴリー別': '3210991', 'カメラ': '16462091', 'テレビ・レコーダー': '3477381', 'オーディオ': '16462081', 'ポータブルオーディオ': '3371411', '家電': '124048011', 'アクセサリ・サプライ': '3371421', '携帯電話・スマートフォン': '128187011', 'カーナビ・カーAV': '2111178051', '無線・トランシーバー': '387483011', '電話機・FAX': '3479011', 'ウェアラブルデバイス': '3544106051', '家電＆カメラ': '3210981'}
```

### カテゴリごとの売り上げランキングを表示
```console
$ python3 examples.py '--topseller'
```
英会話の書籍のカテゴリでランキングを表示
```
{'4478069409': '会話もメールも 英語は3語で伝わります', '4797680121': '英語の品格 (インターナショナル新書)', '4838729502': 'TOEIC(R) L&Rテスト 超即効スコアUPテクニック114', '4757405804': '英会話ペラ ペラビジネス100 － ビジネスコミュニケーションを成功させる知的な大人の会話術 [CD2枚付]', '482224816X': 'スティーブ・ジョブズ 驚異のプレゼン', '4887245491': 'CD付 即戦力がつくビジネス英会話 改訂増補版: 基本から応用まで', 'B01B6KH2B2': '書きたい表現がすぐに見つかる英文メール', '4413210921': 'みんな使える! こなれた英語201フレーズ (青春新書プレイブックス)', '4887596588': '東大生が書いた つながる英 文法', '4327430536': '英文ビジネスレター&Eメールの正しい書き方'} 
```

### レビュー情報の取得
```console
$ python3 examples.py '--reviews'
```
スティーブ・ジョブス列伝で検索
```
6 人中、4人の方が、｢このレビューが参考になった｣と投票しています。
最初は★2にしようと思ったが, 2011/5/24
投稿者 アイフォナー (Japan)  - レビューをすべて見る
Amazonで購入(詳細)

レビュー対象商品: スティーブ・ジョブズ 驚異のプレゼン (単行本（ソフトカバー）)
前半の約2割は、ジョブズを褒めるだけでプレゼンについて具体的な手順が書かれていません。ファンブックを買ったわけではないのだから、早く本題に入って欲しいという苛立ちはありました。しかし残りの8割は非常にわかりやすく丁寧にジョブズのプレゼンの手順と実践の仕方が解説されています。プレゼン本なのに、著者や訳者の本の書き方（ジョブズのプレゼン方法のプレゼン）が下手だったらなんの説得力がないが、ただ方法を箇条書きするわけではないこの本の書き方も、一種のプレゼンなのかもしれない。プレゼン本というと日常的にプレゼンの機会がある人以外縁がなさそうに思われがちだが人の説得、自己の主張、ちょっとした面接などいくらでもこの本のノウハウを生かせる場面はある。ただ、本にも書かれてるがこの方法を学んだからといっていきなり説得がうまくなるような魔法の本ではない。ましてや格好だけ真似てKeynoteやMacを買ったからといって何か変わるわけでもない。この本を読み、1に練習2に練習、3、4がなくて5に練習が必要である。
```

## まとめ
このように、多角的で広い視点の情報が取得することができるので夢がある
